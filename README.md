# Pokemon Sword and Shield Watt Farmer

As long as the in-game preconditions are met before plugging in the device, plugging the Arduino directly into the Switch through a USB Type B to USB Type C Cable should enable the bot to start farming watts through the date increase exploit

## In-Game Information

### Preconditions

-  When you press the `a button` you initiate dialoge with a grey den that does not contain a beam of light or any watts
- You have at least 1 `Wishing Stone`
- Nintendo Switch Date and Time System Settings:
    - Synchronize Clock via Internet: Off
    - The Month is set to December of the current year (12)

## Setting up the Arduino

- Disclaimer: These instructions were written for Mac OSX in the context of an Arduino with an atmega16u2 chip
- Change the `resets` variable to the number of den resets you would like to perform (each den reset is 2000 watts post game) at the top of `instructions.h` before making and flashing `Joystick.hex` to the Arduino

### Dependencies and Compiling

- Install dfu-programmer through homebrew with:

    `brew install dfu-programmer`
- To compile this project you need AVR GCC Compiler and Tools. This can be installed through homebrew with:

    `brew tap osx-cross/avr`

    followed by

    `brew install avr-gcc`
- Download the LUFA library through this [link](http://www.fourwalledcubicle.com/LUFA.php) and put it in this directory
- Make sure the `LUFA_PATH` inside the `makefile` points to the LUFA subdirectory that you just created inside this directory
- Ensure that the `makefile` setting for `MCU` is set to `MCU = atmega16u2` and compile by typing `make`

### Putting the Arduino in DFU Mode

- Plug the Arduino into a computer
- Put the Arduino in DFU mode if it is not already by bridging the reset pin with the ground
- If necessary, ensure the Arduino is in DFU mode by typing:

    `sudo dfu-programmer atmega16u2 get ID1`

### Flashing onto the Arduino

- Navigate to the folder containing the `.hex` file you are flashing onto the Arduino
- In this case, the `.hex` file to be flashed onto the Arduino is called `Joystick.hex` generated by the `makefile`
- Follow these commands to flash the `.hex` file:

    `sudo dfu-programmer atmega16u2 erase`

    `sudo dfu-programmer atmega16u2 flash <.hex file>`

    `sudo dfu-programmer atmega16u2 reset`

- If you receive this error:

    `dfu-programmer: no device present.`

    but your Arduino is plugged in and the lights are on then you most likely need to put the Arduino into DFU mode by bridging its reset and ground pins